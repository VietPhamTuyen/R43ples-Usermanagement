<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>R43ples by plt-tud</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>R43ples</h1>
        <h2>Revision Management for the Semantic Web</h2>
        <a href="https://github.com/plt-tud/r43ples" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a name="r43ples" class="anchor" href="#r43ples"><span class="octicon octicon-link"></span></a>R43ples</h1>

<p>R43ples (Revision for triples) is Revision Management Tool for the Semantic Web.</p>

<p>It is based on storing the differences of revisions of graphs in additional Named Graphs which are then referenced in a revision graph. It provides an extended SPARQL interface which offers the possibility specify revision of named graphs which should be used for answering the query.</p>

<p><a href="https://travis-ci.org/plt-tud/r43ples"><img src="https://travis-ci.org/plt-tud/r43ples.png?branch=master" alt="Build Status"></a>
<a href="https://scan.coverity.com/projects/2125"><img src="https://scan.coverity.com/projects/2125/badge.svg" alt="Coverity Scan Build Status"></a>
<a href="https://www.ohloh.net/p/r43ples"><img src="https://www.ohloh.net/p/r43ples/widgets/project_thin_badge.gif" alt="Ohloh Project Status"></a></p>

<p>This project provides a service for revision management of named graphs in a triple store.
The service can be interconnected in front of an existing SPARQL endpoint of a Triple Store. 
This service in the associated Triple Store creates and manages a revision management of graphs. 
It provides a SPARQL endpoint where all queries have to be directed to. 
The SPARQL query defines whether only a revision is queried, or a new revision needs to be created. 
Furthermore, the service provides an interface for revision management and the import or export of data from the Computer Aided Engineering tools.</p>

<p>The javdoc can be found at <a href="http://plt-tud.github.io/r43ples/javadoc/">http://plt-tud.github.io/r43ples/javadoc/</a>.</p>

<h2>
<a name="dependencies" class="anchor" href="#dependencies"><span class="octicon octicon-link"></span></a>Dependencies</h2>

<ul>
<li>JDK 1.7</li>
<li>Running Triplestore with SPARQL 1.1 endpoint (tested with Virtuoso 7)</li>
</ul><h2>
<a name="starting" class="anchor" href="#starting"><span class="octicon octicon-link"></span></a>Starting</h2>

<p>Ant is used for compiling and starting</p>

<pre><code>ant run
</code></pre>

<h2>
<a name="interfaces" class="anchor" href="#interfaces"><span class="octicon octicon-link"></span></a>Interfaces</h2>

<p>SPARQL endpoint is available at:</p>

<pre><code>[uri]:[port]/r43ples/sparql
</code></pre>

<p>It directly accepts SPARQL queries with HTTP GET parameters for <strong>query</strong> and <strong>format</strong>: </p>

<pre><code>[uri]:[port]/r43ples/sparql?query=[]&amp;format=(HTML|JSON)
</code></pre>

<p>There is a command line admin interface which can be started separately. However, it is deprecated and will be removed in the future.</p>

<h2>
<a name="configuration" class="anchor" href="#configuration"><span class="octicon octicon-link"></span></a>Configuration</h2>

<p>There is a configuration file named <em>resources/r43ples.conf</em> where all parameters are configured.</p>

<ul>
<li>
<em>sparql.endpoint</em> - SPARQL endpoint of triplestore which stores all information</li>
<li>
<em>sparql.username</em> - username for connected SPARQL endpoint allowed to write data</li>
<li>
<em>sparql.password</em> - password for specified user</li>
<li>
<em>revision.graph</em> - named graph which is used by R43plesto store revision graph information</li>
<li>
<em>service.port</em> - port under which R43ples provides its services</li>
<li>
<em>service.uri</em> - URI under which R43ples provides its services</li>
</ul><p>The logging configuration is stored in <strong>resources/log4j.properties</strong></p>

<h2>
<a name="sparql-interface" class="anchor" href="#sparql-interface"><span class="octicon octicon-link"></span></a>SPARQL Interface</h2>

<ul>
<li>
<p>Create graph</p>

<pre><code>CREATE GRAPH &lt;graph&gt;
</code></pre>
</li>
<li>
<p>Select query</p>

<pre><code>SELECT * FROM &lt;graph&gt; REVISION "23" WHERE {?s ?p ?o}
</code></pre>
</li>
<li>
<p>Update query</p>

<pre><code>USER "mgraube" MESSAGE "test commit" 
INSERT {
    GRAPH &lt;test&gt; REVISION "2" {
        &lt;a&gt; &lt;b&gt; &lt;c&gt; .
    }
}
</code></pre>
</li>
<li>
<p>Branching</p>

<pre><code>USER "mgraube"
MESSAGE "test commit"
BRANCH GRAPH &lt;test&gt; REVISION "2" TO "unstable"
</code></pre>
</li>
<li>
<p>Tagging</p>

<pre><code>USER "mgraube"
MESSAGE "test commit"
TAG GRAPH &lt;test&gt; REVISION "2" TO "v0.3-alpha"
</code></pre>
</li>
</ul><h2>
<a name="sparql-join-option" class="anchor" href="#sparql-join-option"><span class="octicon octicon-link"></span></a>SPARQL Join option</h2>

<p>There is a new option for R43ples which improves the performance. The necessary revision is not temporarily generated anymore.
The SPARQL query is rewritten in such a way that the branch and the change sets are directly joined inside the query. This includes the order of the change sets.
It is currently under development und further research. The option can be enabled by</p>

<pre><code>#OPTION r43ples:SPARQL_JOIN
</code></pre>

<p>For details, have a look into the <strong>doc</strong> directory.</p>

<p>It currently supports:</p>

<ul>
<li>Multiple Graphs</li>
<li>Multiple TriplePath</li>
<li>FILTER</li>
<li>MINUS</li>
</ul><h2>
<a name="algorithm" class="anchor" href="#algorithm"><span class="octicon octicon-link"></span></a>Algorithm</h2>

<p>Without SPARQL Join option the algorithm are like the following</p>

<pre><code>For each named graph 'g' in a query, a temporary graph 'TempGraph_g_r' is generated for the specified revision 'r' according to this formula ('g_x' = full materialized revision 'x' of graph 'g'):
    TempGraph_g_r = g_nearestBranch + SUM[revision i= nearestBranch to r]( deleteSet_g_i - addSet_g_i )
</code></pre>

<pre><code>def select_query(query_string):
    for (graph,revision) in query_string.get_named_graphs_and_revisions():   
        execQuery("COPY GRAPH &lt;"+graph+"&gt; TO GRAPH &lt;tmp-"+graph+"-"+revision+"&gt;")
        for rev in graph.find_shortest_path_to_revision(revision):
            execQuery("REMOVE GRAPH "+ rev.add_set_graph+" FROM GRAPH &lt;tmp-"+graph+"-"+revision+"&gt;")
            execQuery("ADD GRAPH "+ rev.delete_set_graph+" TO GRAPH &lt;tmp-"+graph+"-"+revision+"&gt;")
        query_string.replace(graph, "tmp-"+graph+"-"+revision)
    result = execQuery(query_string)
    execQuery("DROP GRAPH &lt;tmp-*&gt;")
    return result
</code></pre>

<pre><code>def update_query(query_string):
    for (graph,revision) in query_string.get_named_graphs_and_revisions():
        newRevision = revision +1
        execQuery("ADD GRAPH "+ rev.delete_set_graph+" TO GRAPH &lt;tmp-"+graph+"-"+revision+"&gt;")
        ...
</code></pre>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/plt-tud/r43ples/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/plt-tud/r43ples/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/plt-tud/r43ples"></a> is maintained by <a href="https://github.com/plt-tud">plt-tud</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
